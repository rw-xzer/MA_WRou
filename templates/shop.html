<!doctype html>
{% extends "base.html" %}
{% load static %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'app.css' %}" />
{% endblock %} {% block content %}
<main class="flex h-[91.7dvh] flex-col overflow-hidden bg-gray-50">
  <!-- Top Controls -->
  <div class="flex items-center justify-between border-b border-gray-300 bg-white px-6 py-4">
    <h1 class="text-2xl font-bold">Rewards Shop</h1>
    <div class="flex items-center gap-4">
      <!-- Coins Counter -->
      <div class="rounded-lg border border-gray-300 bg-white px-4 py-2">
        <span id="coinsText" class="text-lg font-semibold">Coins: 0</span>
      </div>
    </div>
  </div>

  <!-- Add Reward Section -->
  <div class="border-b border-gray-300 bg-white px-6 py-4">
    <button
      id="addRewardBtn"
      class="flex items-center gap-2 rounded-xl border border-black bg-blue-500 px-4 py-2 text-white hover:bg-blue-600"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="h-5 w-5"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 4.5v15m7.5-7.5h-15"
        />
      </svg>
      Add Reward
    </button>
  </div>

  <!-- Main Content -->
  <div class="flex flex-1 flex-col overflow-y-auto p-6">
    <div id="rewardsContainer" class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
      <!-- Rewards will be inserted here -->
    </div>
  </div>
</main>

<!-- Reward Modal -->
<div
  id="rewardModal"
  class="modal bg-opacity-50 fixed inset-0 z-50 flex hidden items-center justify-center overflow-y-auto bg-black py-4"
>
  <div
    class="my-auto max-h-[90vh] w-96 overflow-y-auto rounded-lg bg-white p-6"
  >
    <h3 class="mb-4 text-xl font-bold" id="rewardModalTitle">Add Reward</h3>
    <form
      id="rewardForm"
      onsubmit="event.preventDefault(); createRewardFromForm();"
    >
      <div class="mb-4">
        <label for="rewardName" class="mb-1 block text-sm font-medium"
          >Reward Name</label
        >
        <input
          type="text"
          id="rewardName"
          class="w-full rounded border border-black px-3 py-2"
          required
        />
      </div>

      <div class="mb-4">
        <label for="rewardDescription" class="mb-1 block text-sm font-medium"
          >Description</label
        >
        <textarea
          id="rewardDescription"
          class="w-full rounded border border-black px-3 py-2"
        ></textarea>
      </div>

      <div class="mb-4">
        <label for="rewardPrice" class="mb-1 block text-sm font-medium"
          >Price (coins)</label
        >
        <input
          type="number"
          id="rewardPrice"
          min="1"
          class="w-full rounded border border-black px-3 py-2"
          required
        />
      </div>

      <div class="flex gap-2">
        <button
          type="submit"
          class="flex-1 rounded-lg border border-black bg-blue-500 px-4 py-2 text-white"
        >
          Save
        </button>
        <button
          type="button"
          onclick="closeModal('rewardModal')"
          class="flex-1 rounded-lg border border-black bg-gray-200 px-4 py-2"
        >
          Cancel
        </button>
      </div>
      <div id="rewardDeleteButton" class="mt-2 hidden">
        <button
          type="button"
          onclick="deleteReward()"
          class="w-full rounded-lg border border-red-500 bg-red-500 px-4 py-2 text-white hover:bg-red-600"
        >
          Delete Reward
        </button>
      </div>
    </form>
  </div>
</div>

<script src="{% static 'shop.js' %}"></script>
{% endblock %}

